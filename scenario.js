const _ = require('lodash');

const places = [
    '547723a486deda0b00d4379c', '54773b8786deda0b00d43837', '54773e2f86deda0b00d438c3',
    '5477465186deda0b00d43a8e', '54785240be35740b009e81ae', '54787851be35740b009e8258',
    '547c4bc9b787bd0b00dcfb5b', '547c7e6dd5ddd70b00a0c661', '547c8567d5ddd70b00a0c6d1',
    '548efe940ad9d234652ac77b', '54af9f8d993307fb769cc481', '54afa49a0746a9cb7621e61e',
    '54afae37993307fb769cc52f', '54afd1eabe3215e776813dd3', '54afd58dbe3215e776813dec',
    '54afe0d1be3215e776813e3b', '54afe2b1993307fb769cc634', '54afe6bc80d862d9767cf2f5',
    '54afe95c80d862d9767cf32e', '54afec49993307fb769cc6fb', '54afedea993307fb769cc717',
    '54b39197b1c479446e1def85', '54b397ccb1c479446e1deff3', '54b398fca5a3d7566eb0030a',
    '54b39b6ea5a3d7566eb00326', '54b39cf19f0c8d666e1abef4', '54b3a02bb1c479446e1df064',
    '54b3a4edb1c479446e1df07d', '54b3a6c2a5a3d7566eb0038d', '54b3a95ea5a3d7566eb003aa',
    '54b3c4c0a5a3d7566eb003b6', '54b3c6c1a5a3d7566eb003d1', '54b3ca87b1c479446e1df0e1',
    '54b3cc3257de10366ed13507', '54b3cd6e9f0c8d666e1abfc1', '54b3cf0bb1c479446e1df120',
    '54b3cfbc57de10366ed13543', '54b3d11f57de10366ed13563', '54b3d468a5a3d7566eb00470',
    '54b3d68ea5a3d7566eb00483', '54b3daaf57de10366ed135ab', '54b3de069f0c8d666e1ac0d1',
    '54b3e24da5a3d7566eb00594', '54b4e3eaa5a3d7566eb006f0', '54b4e6e157de10366ed13811',
    '54b4eb529f0c8d666e1ac327', '54b4ef86a5a3d7566eb007e8', '54b4f3beb1c479446e1df536',
    '54b4f73c9f0c8d666e1ac45e', '54b51a173755cbfb542c2473', '54b51b835edc101155fa1ed2',
    '54b51c593755cbfb542c24a5', '54b520ed05df73e55431912b', '54b526423755cbfb542c24c9',
    '54b527fd5edc101155fa1f22', '54b529b405df73e55431917f', '54b535bc05df73e55431919f',
    '54b5388438ef07015525f229', '54b53af93755cbfb542c254e', '54b53c0138ef07015525f259',
    '54b53df43755cbfb542c2586', '54b53ebe5edc101155fa1fde', '54b53f6a05df73e55431922f',
    '54b5413d38ef07015525f2c5', '54b6414938ef07015525f2c6', '54b6431405df73e55431925d',
    '54b64c345edc101155fa20ef', '54b64f5105df73e55431939e', '54b65e235edc101155fa21b7',
    '54b664313755cbfb542c27f1', '54b66ff35edc101155fa229c', '54b683995edc101155fa22e1',
    '54b684615edc101155fa22ec', '54b6862f3755cbfb542c28cb', '54b686db05df73e554319553',
    '54b687863755cbfb542c28e8', '54b6883e38ef07015525f5e3', '54b6896d3755cbfb542c290d',
    '54b68b5d3755cbfb542c294a', '54b7b14fc53d4fa64fb8904f', '54b7b4b1c53d4fa64fb8909b',
    '54b7b6d5c302faad4f3aec44', '54b7b92fcb00419b4f4bfb48', '54b7bbadcb00419b4f4bfb9e',
    '54b7c01f25003a824f648898', '54b7c1d4c302faad4f3aed69', '54b7c6b4c53d4fa64fb89222',
    '54b7c9bfc302faad4f3aeda6', '54b7cc65c53d4fa64fb89259', '54b7ce63c302faad4f3aede0',
    '54b7d0c0c302faad4f3aedfb', '54b7d2b525003a824f64894c', '54b7d4b0c302faad4f3aee2b',
    '54b7d69625003a824f64897c', '54b7d79c25003a824f648996', '54b7d9c8cb00419b4f4bfd26',
    '54b7ddff25003a824f6489c7', '54b7dee3c53d4fa64fb89337', '54b7e2dec302faad4f3aef18',
    '54b7e39d25003a824f648a60', '54b7e6e6cb00419b4f4bfe08', '54b7e963c302faad4f3aef7a',
    '54b7f660c53d4fa64fb8943c', '54b7f93bc302faad4f3aefd5', '54b7fb43c302faad4f3af015',
    '54b8005025003a824f648b85', '54b8023ac53d4fa64fb89509', '54b80380c53d4fa64fb89521',
    '54b804c625003a824f648bdc', '54b805f8cb00419b4f4bff6d', '54b80958c53d4fa64fb8956d',
    '54b80a58c53d4fa64fb89587', '54b80b32c53d4fa64fb8959d', '54b80c3ccb00419b4f4bffce',
    '54b80db5c53d4fa64fb895d1', '54b80f29cb00419b4f4c0011', '54b81239c53d4fa64fb8961d',
    '54b8135525003a824f648cdd', '54b81475c302faad4f3af1c0', '54b815afc302faad4f3af1e7',
    '54b816d8c53d4fa64fb896a5', '54b818f7c53d4fa64fb896dd', '54b81a43c302faad4f3af276',
    '54b81c42c53d4fa64fb89756', '54b8ccfac53d4fa64fb8979c', '54b8cf6f3b3a1d796520afca',
    '54b8cfeddf5b17576526057f', '54b8d0573b3a1d796520afeb', '54b8d1736a3b3a496537fe15',
    '54b8d28c3b3a1d796520b038', '54b8d3336a3b3a496537fe42', '54b8d3ecdf5b1757652605f8',
    '54b8d4793b3a1d796520b063', '54b8d53f6a3b3a496537fe72', '54b8d5f66a3b3a496537fe88',
    '54b8d8aa6a3b3a496537fee5', '54b8dfe93b3a1d796520b149', '54b8e2a93b3a1d796520b1b3',
    '54b8e543df5b1757652607c1', '54b90ab703670af22d4fc341', '54b912f7472e93d62d9263a7',
    '54b913f803670af22d4fc3e1', '54b9149a472e93d62d9263dd', '54b918a66eebabe42d39b83d',
    '54b9196c02f7310b2e0baaf3', '54b91ab202f7310b2e0bab11', '54b91c02472e93d62d92644e',
    '54b91e7b472e93d62d926470', '54b920aa472e93d62d92649b', '54b923176eebabe42d39b8fb',
    '54b924f06eebabe42d39b93c', '54b927c4472e93d62d92654e', '54b92ab002f7310b2e0bac93',
    '54be2720c4a0e60017efb08f', '54be2ac36c9e7cf91e2ed92d', '54be3a05850d71d74b446375',
    '54be4fd4426cb1b74b97619b', '54be505b8dc7cdc54be218e6', '54be51988dc7cdc54be218ea',
    '54be52f5850d71d74b4463e1', '54be5694850d71d74b4463f9', '54c8e24ca1495ea24fd78910',
    '54c8e344c34080c44f710855', '54c8e693611e5f944fb3f17b', '54c8e8b7ecd301b44fe8bcd5',
    '54d1e6384e5d481411899d86', '54ddc9bb58e67a6129fcee0f', '54ddd38f29e8457d28672fad',
    '54e1e93d29e8457d2867302f', '54e1eba946afcc91296c2672', '551c21732f8c9399404c3bf0',
    '552eb3a607e829712d3a23b8', '552eb4afb9092b3f2dbab2ee', '5547642987c83eb26cb2a12a',
    '555a03c3ab3ed6805faa29d3', '555a102a456127925feb7a71', '555f0b9a2c9de7b27ff7c3c0',
    '55646e1512d20a701a1e19eb', '556476c7ea89dc0e1a500413', '5564770b398632ef199dcd39',
    '556f2fdb1e788ebf3eb00c6d', '556f436a1e788ebf3eb00d1a', '55701b7a264c39803ebfa785',
    '55702c54f36434953e5047b9', '557036781e788ebf3eb00f99', '55703f912369cdaa3ea68a4b',
    '5570484f264c39803ebfaadc', '5570538c2369cdaa3ea68c21', '55705dea264c39803ebface7',
    '55715844125eea582cbd1f03', '557164e181375e0f2c132073', '557178e3125eea582cbd2134',
    '5571821aa5d751682cc9a72d', '5571882d2d54dcff2baec573', '5571913377fa3d7747d0016d',
    '5571a085125eea582cbd257b', '5571a716652b161a6e6ee421', '5571ad82125eea582cbd27b8',
    '5575f600f59550d43f443110', '55798e7b20adfc6e61b82af1', '55799e32e40b6e2f62eb8889',
    '5579a03bc31d5027625e9761', '5579a73aa38c382d62ddadcd', '5579a955a38c382d62ddadef',
    '557e8bc4c27ed01549ab9316', '557ec0d378d0f235491bcebe', '557ece12c27ed01549ab934e',
    '557ed479c27ed01549ab935c', '557ee1c720adfc6e61b8301d', '558003cec27ed01549ab94a2',
    '5580291c20adfc6e61b8304a', '55bb8eabf4e5fe8c0acd9b5e', '55cca7512ae4cb4667610251',
    '55ccad813e267d5067b1a265', '55cdd908d5e7ba4a67c0d1cb', '55cddb562ae4cb466761033b',
    '55cddf4bd5e7ba4a67c0d24d', '55cde3183e267d5067b1a3ab', '55d19e9231ba2203247b1af8',
    '55d1a2ce31ba2203247b1b16', '55d1a4e431ba2203247b1b38', '55d1a92631ba2203247b1b5e',
    '55d1b7b8ff69295c271978d1', '55d1d0773b5b8eee26c796b0', '55d1ff793efe9e00273b0dbb',
    '55d45a454664cff709f9ffcc', '55d45b4b31ba2203247b1deb', '5605646aa2a911bf204e9e79',
    '56056871cd8f1e9a207bb4bf', '56056a7fcd8f1e9a207bb4f7', '56056fbc6872a18820d194cf',
    '560573fecd8f1e9a207bb565', '560575c06872a18820d19537', '56057b4f6872a18820d19575',
    '56057e486872a18820d195a7', '560911f56872a18820d19af1', '56091712604ce1ac2036097f',
    '56091a9f6872a18820d19b59', '56092d1ca2a911bf204ea701', '56096486427ad29b05294532',
    '560986d5555bf97705720e05', '56098a94555bf97705720e39', '56098db9c6d52b89053b61cc',
    '560994ff555bf97705720e9f', '560c1746144af7bc27697772', '560c1ac5560dd0ac27fc40ab',
    '560c1ff0722741ce27dcdf1a', '562a5ad68e4d42e761a538ff', '56446ce95ace839829fe897f',
    '564daf1365e1cdc74939ff64', '5665de0c0da584217f5a9c41', '5665debe9cddcdeb7eef8abd',
    '5665dfb2128222cf7e6c1ec1', '5665e132128222cf7e6c1efd', '5665e28e9cddcdeb7eef8b67',
    '5665e3259cddcdeb7eef8b9d', '5666d231497ff8067f855d95', '5694d6807bf31bad44a2e700',
    '5694df24e156d5d54430d5a1', '577ccf7ffc340b652f974bea', '577ce1e1faf217257dd4c213',
    '58136d366394bc53bec2d0a7', '5813710389feb753b9b14a50', '58137ed468f64653bf8ce790',
    '5813879f89feb753b9b14ac6', '58138b3889feb753b9b14b16', '58138f60346dbb53cac60913',
    '5821c1cb6394bc53bec2d9f1', '5851173f61c2d50916493f06', '588749d2b9b71e08ed5e1f76',
    '58874b0761c2d509164940da', '5898e94a91e4f677e349342d', '58a19b862a0265628b57c696',
    '58a22b89c9b31e6279292692', '58a5c365c9b31e62792927a4', '58a78076c9b31e627929297a',
    '58aa264cc9b31e6279292a7e', '58aec81091e4f677e34939d1', '58aeda2cb9b71e08ed5e2c47',
    '58aee837b9b71e08ed5e2c89', '58b341a191e4f677e3493a99', '58b355a4b9b71e08ed5e2ddf',
    '58b5aad62a0265628b57ce22', '58b5b3092a0265628b57ce5c', '58b817eb2a0265628b57ce9e',
    '58c67e262a0265628b57d1e7', '58c6802c91e4f677e3493d71', '58d0ef6fc9b31e6279293589',
    '58d0ffaec9b31e62792935d3', '58d282d191e4f677e349443a', '5901b0750caee015a141b82d',
    '590c92dd26845d78cecdd6f4', '590f9073a00fa678c0ac6f2f', '592c1bda5504ea7890b4a47e',
    '59300b97c7fa1878e6b8b5a7', '593583935504ea7890b4a5f1', '597b09e20f3d83551f94c7e1',
    '597b190f4c774554eea7e597', '597b19e12e347c55124f03bf', '597b602a0f3d83551f94c822',
    '598338a82e347c55124f0506', '59bba7b93821db006dc0c485', '59ecfe43df37f40122cb53d3',
    '5a4aa86a6bd15c0af2c71117', '5a4bd7456bd15c0af2c711dc', '5a4e3360867a270addc4c43d',
    '5ae1c6e07634de002a245206', '5ae1cd2c5de317001f306dc5', '5ae623f643b906000ea46217',
    '5ae98934e769fb00141852fc', '5ae999f65464290c87241a41', '5ae9ad04dfc9a60cd028f093',
    '5ae9bd1ddfc9a60cd028f094', '5aeae7fc34be341b0137b221', '5aeb02511fad761b6aa4ec94',
    '5aeb106b64d0531ec6f38d30', '5aeb182f1fad761b6aa4ed6f', '5aedf4201fad761b6aa4ed70',
    '5af01bc71fad761b6aa4ed71', '5af02a3f8ab4151b759f2e6b', '5af042411fad761b6aa4ed7f',
    '5af04da164d0531ec6f38dc0', '5af061a064d0531ec6f38dc1', '5af0648364d0531ec6f38dc2',
    '5af2bd4c13614e3f3ba56c6e', '5af2c2d313614e3f3ba56c6f', '5af2cd218149763f656192ee',
    '5af2d0348149763f656192ef', '5af3025013614e3f3ba56d68', '5af572e88149763f65619705',
    '5af57bddba48693f1c1666cb', '5af584edba48693f1c1666cc', '5af58abb13614e3f3ba57116',
    '5af59161ba48693f1c1666cd', '5af95e323cbd095c15ce1e28', '5af9640dd23f8e5bffa24322',
    '5af9795ec1c65a5c0a125872', '5af989a0d23f8e5bffa24323', '5afc01ac3cbd095c15ce222b',
    '5afc0a293cbd095c15ce222c', '5afc10583cbd095c15ce25da', '5afc313fd23f8e5bffa24758',
    '5afc394dd23f8e5bffa24759', '5afe9ed0c1c65a5c0a1259f9', '5afeb591d2591f5bf43273ad',
    '5afec1cbb8b9fb7b612e568b', '5afed3c2c1c65a5c0a125a9f', '5b26d49ecceb282284cca831',
    '5b3104062cebf2289f538c55', '5b310715e2b11428b5a2ab49', '5b31096b2cebf2289f538c57',
    '5b4a58c60ddec601dc986de6', '5b4a5b0dd2eda20229529c34', '5b59fe6f28f40d093cffe418',
    '5b6a005205181017bc2ca547', '5b7159cf9b05a616d337bd8d', '5b717df39b05a616d337c0a6',
    '5b72d9c4ee6da9436bf7beb0', '5b7fbf438b840848a7211094', '5b86b73b36b9e54bfab04654',
    '5b86c0a587641d4c1b1d3b03', '5b86c54b36b9e54bfab0470f', '5b86c9ef36b9e54bfab04710',
    '5b86ce2b36b9e54bfab04711', '5bb12ca1ea4a195b3af53e2f', '5bbd1c4ad965ba5e221beb63',
    '5bbe717cd965ba5e221beb75', '5bbe8244f704e95e2d6fa2fc', '5bc242aa0c53036b3eda5459',
    '5bc250b8d983566b0799eca3', '5bc34d9e04838b6b1df9dcf4', '5bc73e5fb637c5712d14a194',
    '5bc789db6e4d3b6fc4902cac', '5bc8b632d983566b0799ecd0', '5bca3b8aa637ad7476753a37' ];

module.exports = {
    setupQuery,
    afterResponse
};

function setupQuery(context, events, next) {
    context.vars['query'] = _.sampleSize(places, _.random(2, 6)).join(',');
    console.time(context.vars['query']);
    return next();
}

let i = 1;

function afterResponse(requestParams, response, context, ee, next) {
    console.log('#' + i, context.vars['query']);
    console.log('#' + i, requestParams.url);
    console.timeEnd(context.vars['query']);
    // console.log(_.toPairs(requestParams.url));
    if(response.error) {
        console.error('#' + i, response.error);
        return next();
    }

    console.log('#' + i, response.body);
    // const body = JSON.parse(response.body);
    // if (!body.success) {
    //   console.error('#' + i, body.error);
    // }
    i++;
    return next();
}